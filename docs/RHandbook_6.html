<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Emily Schultz" />

<meta name="date" content="2026-02-07" />

<title>R Handbook Lesson 6</title>

<script src="site_libs/header-attrs-2.30/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">ESS 3500 R Handbook</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Lessons
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="RHandbook_1.html">Lesson 1: Software installation</a>
    </li>
    <li>
      <a href="RHandbook_2.html">Lesson 2: Data management</a>
    </li>
    <li>
      <a href="RHandbook_3.html">Lesson 3: R basics</a>
    </li>
    <li>
      <a href="RHandbook_4.html">Lesson 4: Data frames</a>
    </li>
    <li>
      <a href="RHandbook_5.html">Lesson 5: Data visualization</a>
    </li>
    <li>
      <a href="RHandbook_6.html">Lesson 6: Graphing in R</a>
    </li>
    <li>
      <a href="RHandbook_7.html">Lesson 7: Hypothesis testing</a>
    </li>
    <li>
      <a href="RHandbook_8.html">Lesson 8: Probability</a>
    </li>
    <li>
      <a href="RHandbook_9.html">Lesson 9: Probability distributions</a>
    </li>
    <li>
      <a href="RHandbook_10.html">Lesson 10: Chi-square tests</a>
    </li>
    <li>
      <a href="RHandbook_11.html">Lesson 11: T-tests</a>
    </li>
    <li>
      <a href="RHandbook_12.html">Lesson 12: Assumptions and transformations</a>
    </li>
    <li>
      <a href="RHandbook_13.html">Lesson 13: ANOVA</a>
    </li>
    <li>
      <a href="RHandbook_14.html">Lesson 14: Correlations and Regressions</a>
    </li>
    <li>
      <a href="RHandbook_15.html">Lesson 15: Multiple predictors</a>
    </li>
  </ul>
</li>
<li>
  <a href="RHandbook_templates.html">R Templates</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">R Handbook Lesson 6</h1>
<h4 class="author">Emily Schultz</h4>
<h4 class="date">2026-02-07</h4>

</div>

<div id="TOC">
<ul>
<li><a href="#lesson-6-graphing-in-r"
id="toc-lesson-6-graphing-in-r">Lesson 6: Graphing in R</a>
<ul>
<li><a href="#general-structure-of-ggplot-code"
id="toc-general-structure-of-ggplot-code">6.1 General Structure of
ggplot code</a></li>
<li><a href="#histograms" id="toc-histograms">6.2 Histograms</a></li>
<li><a href="#bar-graphs" id="toc-bar-graphs">6.3 Bar graphs</a></li>
<li><a href="#box-plots" id="toc-box-plots">6.4 Box plots</a></li>
<li><a href="#density-plots" id="toc-density-plots">6.5 Density
Plots</a></li>
<li><a href="#scatterplot" id="toc-scatterplot">6.6 Scatterplot</a></li>
<li><a href="#a-note-about-color-in-r"
id="toc-a-note-about-color-in-r">6.7 A note about color in R</a></li>
<li><a href="#exercises" id="toc-exercises">Exercises</a></li>
</ul></li>
</ul>
</div>

<div id="lesson-6-graphing-in-r" class="section level1">
<h1>Lesson 6: Graphing in R</h1>
<p>In Lesson 5, you practiced selecting graphs to visualize different
types on data. In this lesson, you will learn how to make those graphs
in R.</p>
<p>We will use the <strong>ggplot2</strong> package to create the
graphs, so load it now.</p>
<pre class="r"><code>library(ggplot2)</code></pre>
<p>The data set we will work with as we explore graphing is a data set
from the Moorea Long Term Ecological Research site on how coral
recruitment is affected by macroalgae cover.</p>
<p>Download the data set (Recruit_densities_MRB.csv) from Canvas, set
your working directory to the folder that contains the file, and load
the file into R. Call the data set “coral”.</p>
<pre class="r"><code>coral &lt;- read.csv(&quot;Recruit_densities_MRB.csv&quot;)</code></pre>
<div id="general-structure-of-ggplot-code" class="section level2">
<h2>6.1 General Structure of ggplot code</h2>
<p>In this class, we will primarily use the ggplot package for graphing
data. You can graph data in R without using an extra package, and the
syntax is a bit simpler for just making a basic graph, but the graphs
are lower quality, and it takes more work to modify the graph to make it
a publication-quality figure. Using the ggplot package, it takes a
little more coding to simply make the graphs, but it is easier to make
high-quality figures, which is why we will focus on graphing with the
ggplot package.</p>
<p>Before we get into the code for making specific types of graphs, I
will describe the general structure of the code for making ggplot
graphs.</p>
<p>To initialize a ggplot graph, you start with a line of code, using
the <code>ggplot</code> function. The first argument for the function is
the name of the data frame that contains the data you want to graph. The
section argument goes inside the <code>aes</code> (aesthetics) function.
Inside the <code>aes</code> function, you will list the variables you
want the graph. You will need to include at least an x variable, but if
you are graphing the relationship between two variables, you will
include a y variable as well. You can also add additional variables if
you want to do something like use different colors for different groups
of data (we’ll see an example of that in the density plots below.)</p>
<p>The general structure for this opening line, if you have both an x
and y variable, would look something like this (don’t try to run this
code because it just shows the general structure and isn’t set up to
graph any real data):</p>
<pre class="r"><code>ggplot(data=DATEFRAME, aes(x=INDEPENDENTVARIABLE, y=DEPENDENTVARIABLE)</code></pre>
<p>Once you have written the code to initiate the graph, you can add
additional lines of code to add layers to your graph. These layers can
be the graph types themselves (bar, point, line) to instruct R to graph
the data in a particular way. They can also be aesthetic changes that
you want to make, such as changing the axis labels, specifying colors
you want to use in the graph, or modifying the legend.</p>
<p>To add additional layers to the graph, you put a plus sign at the end
of the previous line, indicating to R that you are adding another line
of code to modify the graph. The example below shows what is would look
like to add a layer to create a scatterplot (using the
<code>geom_point</code> function) and then change the axis titles (using
the <code>labs</code> function).</p>
<pre class="r"><code>ggplot(data=DATEFRAME, aes(x=INDEPENDENTVARIABLE, y=DEPENDENTVARIABLE) +
  geom_point() +
  labs(x = &quot;Independent variable&quot;, y = &quot;Dependent variable&quot;)</code></pre>
<p>Note that there are no arguments included in the
<code>geom_point</code> function. By default the graph type functions
will use the data frame and variables provided in the opening
<code>ggplot</code> function. As long as you don’t want to change that
data you are graphing, you don’t need to include those arguments. There
are also optional arguments for these functions that can be used to
change things like the size and color of the points you graph.</p>
</div>
<div id="histograms" class="section level2">
<h2>6.2 Histograms</h2>
<p>Now that we’ve covered the basic structure of a ggplot graph, let’s
make our first graph! We will begin with a histogram to visualize the
distributions of two continuous variables in our data set: macroalgae
cover (MacroCover2016_2022) and coral recruitment density
(RecruitDen).</p>
<p>We’ll make the graph for algae cover first. To start, we’ll just
create the basic histogram, and then we will add some additional lines
of code to modify the aesthetics.</p>
<p>To make the histogram, you will start with the initial line that
includes the data frame name (coral) and variable we will be graphing.
Because we are making a histogram with shows the distribution of a
single variable, we only need to provide the x variable
(MacroCover2016_2022). At the end of the first line, be sure to add a
plus sign. Then, on the next line, you will use the
<code>geom_histogram</code> function to create the histogram for the
data:</p>
<pre class="r"><code>ggplot(data=coral, aes(x=MacroCover2016_2022)) +
  geom_histogram()</code></pre>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="RHandbook_6_files/figure-html/algae_dens-1.png" alt="" width="672" /></p>
<p>Now let’s add in some additional lines to change some aesthetics.
First, we will use the <code>labs</code> function to change the x and y
axis labels. By default, R will use the variable name from the data
frame, but often these are abbreviations, have no spaces, etc., so we
often want to choose more sensible axis labels. The second thing we will
change is the theme. By default, ggplots have a grey grid in the
background. It’s not wrong, but I personally prefer a cleaner look, so I
like to use the classic theme (<code>theme_classic</code>), which has a
plain white background. Feel free to explore other ggplot themes and
find one that you like!</p>
<p>The full code to make the histogram and change the aesthetics will
look like this:</p>
<pre class="r"><code>ggplot(data=coral, aes(x=MacroCover2016_2022)) +
  geom_histogram() +
  labs(x=&quot;Macroalgae cover (percent)&quot;, y=&quot;Frequency&quot;) +
  theme_classic()</code></pre>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="RHandbook_6_files/figure-html/algae_dens_modify-1.png" alt="" width="672" /></p>
<p>Now let’s do the same thing with our second variable: the density of
coral recruits (RecruitDen). The code for this one will look almost
exactly the same. We just have the change the name of the x variable in
the first line and update our x axis label.</p>
<pre class="r"><code>ggplot(data=coral, aes(x=RecruitDen)) +
  geom_histogram() +
  labs(x=&quot;Density of coral recruits&quot;, y=&quot;Frequency&quot;) +
  theme_classic()</code></pre>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="RHandbook_6_files/figure-html/coral_dens-1.png" alt="" width="672" /></p>
<p>What you can see from the histograms is that the distributions of the
data for both variables are somewhat skewed. A lot of the values in the
data set are low, but both have tails of higher values that are
infrequent in the data. This is particularly true for the macroalgae
cover data. This type of information can be very important when we make
decisions about how to analyze our data.</p>
<p>Congratulations to those of you who have made your first ggplot in R!
We’ll now look at some other graph types, but the code will be similar
to what you have already used.</p>
</div>
<div id="bar-graphs" class="section level2">
<h2>6.3 Bar graphs</h2>
<p>The next type of graph we will make is a bar graph. In our coral data
set, we don’t have a count variable to graph, but we can make a bar
graph to show the frequency of one of the categorical variables in the
data set. In addition to the continuous macroalgae cover variable that
we graphed above, the data set has a categorical algae cover variable
(Macroalgal_cover) that categorized the cover into low, medium, and
high. If we wanted to use this categorical variable in our analysis, it
could be useful to see our sample size in each of these categories. We
can do that using a bar graph to show the frequency of data points in
each category.</p>
<p>The code for making the bar graph will be almost identical to the
code we used to make the histogram. Once again, we are graphing the
frequency of a single variable (Macroalgal_cover), so we only need to
include an x variable in the first line. The only other change we will
make, in addition to the variable we are graphing, is the graph type in
the second line of code. This time we will use the <code>geom_bar</code>
function to make a bar graph instead of a histogram.</p>
<pre class="r"><code>ggplot(data=coral, aes(x=Macroalgal_cover)) +
  geom_bar() +
  labs(x=&quot;Macroalgal cover&quot;, y=&quot;Sample size&quot;) +
  theme_classic()</code></pre>
<p><img src="RHandbook_6_files/figure-html/bargraph-1.png" alt="" width="672" /></p>
<p>Based on this bar graph, we can see that we have a much higher sample
size in the low algae cover than the medium and high algae cover.</p>
</div>
<div id="box-plots" class="section level2">
<h2>6.4 Box plots</h2>
<p>Now let’s move on to graphs with both an x and y variable, allowing
us to see the relationship between two variables, starting with a
boxplot. Box plots show the effect of a categorical independent variable
on a continuous dependent variable.</p>
<p>Just like when we worked with ggplot in the previous section, we will
start by specifying the data and variables we want to include in our
graph. Because we are now interested in two variables, our independent
(macroalgae cover) and dependent (coral recruit density) variables, we
will specify both our x and y variable in the <code>aes</code> function.
In the following lines of code, we tell R to make a box plot, change the
axis labels, and use the classic theme that removes the background color
and gridlines.</p>
<pre class="r"><code>ggplot(data = coral, aes(x = Macroalgal_cover, y = RecruitDen)) +
  geom_boxplot() +
  labs(x = &quot;Macroalgal cover&quot;, y = &quot;Density of coral recruits&quot;) +
  theme_classic()</code></pre>
<p><img src="RHandbook_6_files/figure-html/boxplot-1.png" alt="" width="672" /></p>
<p>As a reminder, the median for each group is shown by the bar in the
middle of each box. The boxes show the inter-quartile range (i.e., the
bottom of the box shows the first quartile and the top of the box shows
the third quartile). Therefore, 50% of the values in the data fall
within the box. The whiskers (vertical lines you might see below and/or
above the box) show the smallest and largest values in the data set that
are no farther than 1.5 times the inter-quartile range from the first
and third quartile, respectively.</p>
<p>From this graph, we can see that the density of coral recruits is
highest in the low macroalgal cover category. There are even some
outliers in that category that have a much higher density of coral
recruits than we see in the rest of the plots.</p>
</div>
<div id="density-plots" class="section level2">
<h2>6.5 Density Plots</h2>
<p>Another type of graph that is effective when you have a categorical
independent variable and a continuous dependent variable is a density
plot. I personally like this type of plot because it shows the full
distribution of the data, so it provides a lot of information. It is
particularly effective when you only have a few values for your
categorical variable.</p>
<p>We will make a density plot for the same data we used in our boxplot:
looking at the effect of macroalgae cover (low, medium, or high) on the
density of coral recruits. We’ll first make the graph with some
aesthetic defaults, and then we will update the code to change some of
the aesthetics.</p>
<p>Setting up the variables for a density plot is a little different
than what we did for the boxplot. In this case, we will be graphing the
frequency of a single variable (RecruitDen), like we did with the
histogram, so we will have an x variable but no y variable. However, to
show the difference in the distributions of coral recruit densities
between the three different macroalgae categories, we will graph the
distributions separately for each macroalgae category and show the
distribution in different colors. Therefore we will add Macroalgal_cover
as the “fill” variable in our <code>aes</code> function. This will tell
R to graph the distributions separately and use a different fill color
for each macroalgal cover category.</p>
<p>The only other change to the structure of the code that we have been
using is that we will this time use the <code>geom_density</code>
function to make a density plot.</p>
<pre class="r"><code>ggplot(data = coral, aes(x = RecruitDen,fill=Macroalgal_cover))+
  geom_density() +
  labs(x = &quot;Density of coral recruits&quot;, y = &quot;Probability Density&quot;) +
  theme_classic()</code></pre>
<p><img src="RHandbook_6_files/figure-html/density_default-1.png" alt="" width="672" /></p>
<p>A couple things you might notice about the graph:</p>
<ol style="list-style-type: decimal">
<li>The distributions overlap with each other, so, with a solid fill
color, the distribution on top hides the distributions in the back.</li>
<li>The default color scheme (in my opinion) is kinda ugly, and it is
also not colorblind friendly.</li>
</ol>
<p>We can make some aesthetic changes to address these problems:</p>
<p>Let’s start with the first problem. To allow us to better see the
distributions of all categories, we can make the fill of the
distributions semi-transparent. To do this, we’ll add in the optional
<code>alpha</code> argument to the <code>geom_density</code> function to
adjust the transparency. The value of alpha can range from 0 to 1, with
0 being completely transparent and 1. In the code below, I use a value
of 0.5, but feel free to play around with the value to see how it
affects the appearance.</p>
<p>To address the second problem (the color scheme itself), we can
manually change the colors we use for each category. To do so, we add
another line of code with the <code>scale_fill_manual</code> function.
Within this function, we can provide a list of values for the colors we
want to use. We must provide one color for each of the categories in our
data set, three in this case. I used the hex codes for the colors I
wanted to use, but you can also use color names like “blue”, “red”, or
“gray”. For more information and resources on choosing colors in R (and
where you can find color names and hex codes), see the section at the
end of this lesson called <a href="#a-note-about-color-in-r">6.7 A note
about color in R</a>.</p>
<p>The full code for our density plot, with the aesthetic changes, is
shown below.</p>
<pre class="r"><code>ggplot(data = coral, aes(x = RecruitDen,fill=Macroalgal_cover))+
  geom_density(alpha = 0.5) +
  scale_fill_manual(values=c(&quot;#ce9642&quot;,&quot;#3b7c70&quot;,&quot;#898e9f&quot;)) +
  labs(x = &quot;Density of coral recruits&quot;, y = &quot;Probability Density&quot;) +
  theme_classic()</code></pre>
<p><img src="RHandbook_6_files/figure-html/density-1.png" alt="" width="672" /></p>
<p>Here we have our final graph, showing the sample distributions for
each macroalgal category. Like in the boxplot, we can see that coral
recruitment was highest when macroalgal cover was low, but we can also
see the full shape of the distribution for each category, including the
long tail of high recruitment numbers in the low algal cover plots.</p>
</div>
<div id="scatterplot" class="section level2">
<h2>6.6 Scatterplot</h2>
<p>We will now move on to our graph type with a continuous independent
variable and a continuous dependent variable. To visualize these models,
we will use scatter plots of the sample data along with trendlines to
represent the overall relationship betwen the variables. Scatter plots
are a good way to visualize the relationship between two continuous
variables, so we can see how strongly they might be correlated, whether
the relationship is positive or negative, and how much variation there
is in the relationship.</p>
<p>For this graph, because we need two continuous variables, we will use
the continuous macroalgae cover data (MacroCover2016_2022) as our
independent variable and our coral recruit density (RecruitDen) variable
as our dependent variable.</p>
<p>As usual, we will first specify the data set and variables (we will
again have an x and y variable because we want to visualize the
relationship between macroalgae cover and coral recruit density). We
will use the <code>geom_point</code> function to create the scatterplot,
and then we will add a line with the <code>geom_smooth</code> function
to add the trendline. In the <code>geom_smooth</code> function, we will
include the optional <code>method</code> argument to specify the method
(type of function) we want R to use to create the trendline. We set the
method to “lm”, short for “linear model”, which is the same type of
model we will work with when we run statistical tests for data like
these later in the semester. Otherwise, the structure of the code will
be similar to what we used for the other graphs.</p>
<pre class="r"><code>ggplot(data = coral, aes(x = MacroCover2016_2022, y = RecruitDen))+
  geom_point() +
  geom_smooth(method = &quot;lm&quot;) +
  labs(x = &quot;Macroalgae cover (percent)&quot;, y = &quot;Density of coral recruits&quot;) +
  theme_classic()</code></pre>
<pre><code>## `geom_smooth()` using formula = &#39;y ~ x&#39;</code></pre>
<p><img src="RHandbook_6_files/figure-html/scatter-1.png" alt="" width="672" /></p>
<p>You should see a scatterplot with a trendline representing the
relationship between the two variables, and shading to represent
variation, or uncertainty, in the mean. In this case, the shading
represents the 95% confidence interval, rather than the standard
deviation. The 95% confidence interval basically says that if we
repeated our experiment over and over again, we would expect the mean
value estimated from our data to fall within that interval 95% of the
time. Like the standard deviation, it is method of representing the
variation in our data. Both measures (as well as variance and standard
deviation) are acceptable ways of representing the variation. What is
important is that when you present your results, you make it clear in
your figure captions and text what measure of variation you used.</p>
<p>What we can see from the graph is that there is, in general, a
negative relationship between macroalgae cover and density of coral
recruits, but there is a lot of scatter around the line when macroalgae
cover is very low.</p>
</div>
<div id="a-note-about-color-in-r" class="section level2">
<h2>6.7 A note about color in R</h2>
<p>When we made our density plot, we included the
<code>scale_fill_manual</code> function to specify the colors we wanted
to use in the graph. You are not required to include this function. If
you leave it out, ggplot will automatically choose colors based on its
default color package. However, the ggplot’s default color palette is
not colorblind-friendly, so it is usually better to choose a different
color palette. Below are some links to websites that can help you choose
colors. When you list the colors you want to use, you can list the hex
codes (as we do in our code in this lesson) or the name of the color
(e.g., “blue”). If you use the <code>scale_fill_manual</code> function,
or a similar function, to specify colors, be sure to include one color
for every group in your variable. In our example, the variable displayed
by the colors only had three groups (low, medium, and high), so we
listed three colors.</p>
<p>List of useful R color websites:</p>
<ol style="list-style-type: decimal">
<li><p><a
href="https://sape.inf.usi.ch/quick-reference/ggplot2/colour">ggplot 2
Quick reference: colors</a>. This website includes a chart will color
names in R, along with additional information about using color in
ggplot.</p></li>
<li><p><a
href="https://colorbrewer2.org/#type=sequential&amp;scheme=BuGn&amp;n=3">ColorBrewer</a>.
The ColorBrewer website provides a set of color palettes that you can
use in R. You can choose sequential, diverging, or qualitative palettes,
and there is an option for selecting only colorblind-friendly palettes.
The website will provide the hex codes for the colors in the
palette.</p></li>
<li><p><a
href="https://github.com/BlakeRMills/MetBrewer?tab=readme-ov-file">MetBrewer</a>.
MetBrewer, which also has an associated R package, provides a set of
color palettes based on works of art at the Metropolitan Museum of Art.
Not all of the palettes are colorblind-friendly, but you can find a list
of colorblind-friendly palettes at the bottom of the webpage.</p></li>
<li><p><a
href="https://cran.r-project.org/web/packages/viridis/vignettes/intro-to-viridis.html">Introduction
to the viridis color maps</a>. Viridis is an R package that has
colorblind-friendly palettes. This website provides information on the
use of the package. You can also see what some different R color
palettes would look like to people with different forms of
colorblindness.</p></li>
<li><p><a
href="https://www.simplifiedsciencepublishing.com/resources/best-color-palettes-for-scientific-figures-and-data-visualizations">Best
Color Palettes for Scientific Figures and Data Visualizations</a> This
website has some general guidelines for the use of color in scientific
publishing, along with some specific colorblind-friendly palettes,
including the hex codes.</p></li>
<li><p><a href="https://github.com/jakelawlor/PNWColors">PNW colors</a>.
This R package has a set of colorblind friendly palettes based on
photographs from the Pacific Northwest.</p></li>
</ol>
</div>
<div id="exercises" class="section level2">
<h2>Exercises</h2>
<!---LEARNR EX 1-7-->
<iframe style="margin:0 auto; min-width: 100%;" id="myIframeL3" class="interactive" src="https://rby8g8-emily-schultz.shinyapps.io/RHandbookL6/" scrolling="no" frameborder="no">
</iframe>
<!---------------->
<p>There are many different types of graphs and ways we can modify our
graphs using ggplot. We will cover some of these in future lessons as we
get into statistical tests. But these types of graphs will give you a
good starting point for exploring your own data sets! If you would like
to explore more about data visualization using the
<strong>ggplot</strong> package, the <a href="https://r4ds.had.co.nz/">R
for Data Science</a> eBook is a good resource, and many other resources
are a mere internet search away!</p>
<script>
  iFrameResize({}, ".interactive");
</script>
</div>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
